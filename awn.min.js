var waiting_icon,lastProgram,lastRowNum,lastScrollPos,vProgreeBarTimer,appUser="&APP_USER.";function AWNsetPlaceholder(e,t){$("#"+e).attr("placeholder",t)}function AWNSetItemValue(e,t){var o="#"+e;$(o).val(t),apex.server.process("dummy",{pageItems:o},{dataType:"text"})}function showMyDetail(e,t){var o=$(e).closest("tr");lastProgram&&lastProgram.children().toggleClass("ActionRow"),o.children().toggleClass("ActionRow"),lastProgram=o,$("#P1004_SELECTED_PROGRAM").val(t.val),$("#p1004_program_functions_heading").html(t.label+": Allowed Functions"),apex.server.process("dummy",{pageItems:"#P1004_SELECTED_PROGRAM"},{dataType:"text"}).done(function(e){$("#p1004_program_functions").trigger("apexrefresh")})}function askRemoveRollProgram(e,t,o){$.confirm({theme:"black",title:"Confirm!",escapeKey:"cancel",content:"Are you sure to remove this program?",buttons:{confirm:function(){$.fn.RemoveRoleProgram(e,t,o)},cancel:function(){}}})}function askRemoveUserRole(e,t,o){$.confirm({theme:"black",title:"Confirm!",escapeKey:"cancel",content:"Are you sure to remove this user from selected role?",buttons:{confirm:function(){$.fn.RemoveUserRole(e,t,o)},cancel:function(){}}})}function askCopyApplicationRole(e,t){$.confirm({theme:"black",title:"Confirm!",escapeKey:"cancel",content:"Do you want to make a copy of this role?",buttons:{confirm:function(){$.fn.CopyApplicationRole(e,t)},cancel:function(){}}})}function roundTo(e,t){void 0===t&&(t=0);var o=Math.pow(10,t);return e=parseFloat((e*o).toFixed(20)),parseFloat((Math.round(e)/o).toFixed(t))}function awn_number_format(e,t=2){return e.toFixed(t).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function igResetReport(e){apex.region(e).widget().interactiveGrid("getActions").invoke("reset-report")}function igAddRecordFirst(e){apex.region(e).widget().interactiveGrid("getActions").invoke("row-add-row"),igSelectFirstRecord(e)}function igAddRecordLast(e){var t=apex.region(e).widget(),o=t.interactiveGrid("getActions"),n=t.interactiveGrid("getViews").grid.view$;n.grid("setSelection",n.find("tr").last()),o.invoke("selection-add-row"),n.grid("setSelection",n.find("tr").last())}function igAddRecord(e){apex.region(e).widget().interactiveGrid("getActions").invoke("selection-add-row"),igSelectFirstRecord(e)}function igSetNewRecordEvent(e,t){lastRowNum=1e3,$(e).keydown(function(e){e=e||window.event;var o=Number($(".a-GV-cell.igAllowNewRecord").closest("tr.is-selected").attr("data-id").substr(1,4));e.shiftKey||9!=e.which||o>=lastRowNum&&(igAddRecordLast(t),lastRowNum=o+1,e.preventDefault())})}function awnInitiateIgNavigation(e){$("#"+e+' input[class*="igFocus"]').keydown(function(t){var o=t.keyCode||t.which;if(t.shiftKey&&9===o||!t.shiftKey&&9===o){var n,r=$(this).attr("class").split(/\s+/);$.each(r,function(e,t){"igFocus"===t.substring(0,7)&&(n=parseInt(t.substr(8).match(/\d+/)))}),t.shiftKey&&9===o?--n:t.shiftKey||9!==o||++n,$("#"+e+' input[class*="igFocus-'+n+'"]').length>0&&(t.preventDefault(),igSetFocus(e,"igFocus-"+n))}})}function igSetFocus(e,t){var o=apex.region(e).widget(),n=o.interactiveGrid("getCurrentView"),r=o.interactiveGrid("getViews").grid.view$;if(n.supports.selection&&n.getSelectedRecords()&&0!==n.getSelectedRecords().length){var a=$(r.grid("getSelection")[0][1]).find("td."+t).length;a>0?$(r.grid("getSelection")[0][1]).find("td."+t).focus():(a=$(r.grid("getSelection")[0][0]).find("td."+t).length)>0&&$(r.grid("getSelection")[0][0]).find("td."+t).focus()}}function createNewSession(e){var t=$("#pFlowId").val(),o=$("#pFlowStepId").val(),n=$("#pInstance").val();o=e||$("#pFlowStepId").val(),apex.navigation.openInNewWindow("f?p="+t+":"+o+":"+n+":APEX_CLONE_SESSION")}function AWNcustomEvent(e,t){apex.event.trigger(document,e,t)}function AWNdisableEsc(e,t){e.preventDefault()}function warnOnCloseOLD(e,t){var o=$('.ui-dialog.ui-dialog--apex:not([aria-describedby$="_MODAL"])').length;if(o>0)var n=$("iframe").get(o-1).contentWindow.apex.page.isChanged();else n=!1;if(n){confirm("There are unsaved changes. Do you want to continue? - ")||e.preventDefault()}return n}function warnOnClose(e,t){var o=$(e.target).children().get(0).contentWindow.apex,n=$(e.target).children().get(0).contentWindow.document.activeElement,r=$(n).hasClass("js-ignoreChange"),a=o.page.isChanged();if(a&&!r){confirm("There are unsaved changes. Do you want to continue?")||e.preventDefault()}return a}function CloseModalWithWarning(e,t){apex.page.isChanged()?apex.message.confirm("There are unsaved changes. Do you want to continue?",function(e){e&&apex.navigation.dialog.close(!0)}):apex.navigation.dialog.close(!0)}function removeIGbutton(e,t){"action"==e?$(t+' .a-IG-header .a-Toolbar-group .a-Toolbar-item[id$="ig_toolbar_actions_button"]').parent().remove():"search"==e?$(t+' .a-IG-header .a-Toolbar-group .a-Toolbar-item[data-action="search"]').parent().remove():"add"==e?$(t+' .a-IG-header .a-Toolbar-group .a-Toolbar-item[data-action="selection-add-row"]').parent().remove():"edit"==e?$(t+' .a-IG-header .a-Toolbar-group .a-Toolbar-item[data-action="edit"]').remove():"save"==e?$(t+' .a-IG-header .a-Toolbar-group .a-Toolbar-item[data-action="save"]').remove():"editsave"==e||"saveedit"==e?$(t+' .a-IG-header .a-Toolbar-group .a-Toolbar-item[data-action="save"]').parent().remove():console.log('Button Name: "'+e+'" Region ID: "'+t+'"')}function revalidateIG(e){var t,o,n,r,a=apex.region(e).widget().interactiveGrid("getCurrentView"),i=apex.region(e).widget().interactiveGrid("getActions").get("edit");if(a.supports.edit){if(r=a.model,apex.region(e).widget().interactiveGrid("getActions").set("edit",!0),(o=r._data).length>0)for(t=0;t<o.length;t++)if(n=o[t],r.allowEdit(n)){var c=parseFloat(r.getValue(n,"TEMP_COL")),s=c||0;r.setValue(n,"TEMP_COL",s+1)}apex.region(e).widget().interactiveGrid("getActions").set("edit",i)}}function igSelectFirstRecord(e){var t=apex.region(e).widget().interactiveGrid("getCurrentView");t.supports.selection&&(t.getSelectedRecords()&&0!==t.getSelectedRecords().length||(arr=[],arr.push(apex.region(e).widget().interactiveGrid("getViews","grid").model.getRecord(t.model._data[0][0])),t.setSelectedRecords(arr,!0)))}function IGremoveExtraLines(e,t,o){var n,r,a,i=[],c=0;r=(n=apex.region(e).widget()).interactiveGrid("getViews","grid").model,a=r.getFieldKey(t),n.interactiveGrid("setSelectedRecords",[]),r.forEach(function(e){""==("LIST"==o?e[a].v:e[a])&&(i[c]=e,c++)}),n.interactiveGrid("setSelectedRecords",i),r.deleteRecords(i),n.interactiveGrid("setSelectedRecords",[]),igSelectFirstRecord(e)}function CallReport(e,t,o,n){var r="http://reports.paktechsolutions.pk:7778/reports/rwservlet?PakTechErpRpts"+$v("P0_S0001_ID")+o+"&report="+t;$("#P0_S0002_ID").val()&&(r+="&P_S0002_ID="+$("#P0_S0002_ID").val(),r+="&P_S0002_DESC="+$("#P0_S0002_ID :selected").text()),$("#P0_S0003_ID").val()&&(r+="&P_S0003_ID="+$("#P0_S0003_ID").val(),r+="&P_S0003_DESC="+$("#P0_S0003_ID :selected").text()),""!==e&&(r+="&P_REPORT_NAME="+e),$.each(n,function(e,t){""!==t&&(r+="&"+e+"="+t)}),apex.navigation.popup({url:r})}function reportRequest(e,t,o){apex.server.process("Get_Report_Path",{x01:e},{dataType:"text"}).done(function(e){""===e?$.alert({theme:"black",title:"Error!",escapeKey:"Ok",content:"Report not found.",onContentReady:function(){$(".jconfirm-box").css("background-color","#e74c3c")},buttons:{Ok:function(){}}}):(e&&(e=jQuery.parseJSON(e)),CallReport(e.report_name,e.report_path,t,o))})}function awnIGBottomTotal(e,t){$("."+e).length>0?$("."+e).html(t):$(".a-GV-footer .a-GV-status").last().after('<div class="a-GV-status '+e+' awnIGBottomTotal">'+t+"</div>")}function awnIGBottomTotal2(e,t,o){$(o+" ."+e).length>0?$(o+" ."+e).html(t):$(o+" .a-GV-footer .a-GV-status").last().after('<div class="a-GV-status '+e+' awnIGBottomTotal">'+t+"</div>")}function preventEscapeRunningProcess(e,t){confirm("There are some background working in progress, it is recomanded to wait for completion of background process.")}function openAWNProgressBar(){vProgreeBarTimer||(apexProgressBar("P0_PROGRESS_BAR").clear(),apexProgressBar("P0_PROGRESS_BAR").show(),vProgreeBarTimer=setInterval(function(){AWNcustomEvent("check-process-status")},500))}function closeAWNProgressBar(){vProgreeBarTimer&&(clearInterval(vProgreeBarTimer),vProgreeBarTimer=null,AWNSetItemValue("P0_PROGRESS_VALUE","0"),AWNSetItemValue("P0_CURRENT_PROCESS","Initializing...:"),apexProgressBar("P0_PROGRESS_BAR").hide(),apexProgressBar("P0_PROGRESS_BAR").clear())}$.fn.RemoveRoleProgram=function(e,t,o){var n=$(e).closest("tr");n.children().toggleClass("ActionRow",300),apex.server.process("RemoveRoleProgram",{x01:t,x02:o},{dataType:"text"}).done(function(e){""===e?n.children().wrapInner("<div>").children().fadeOut(400,function(){n.remove()}):$.alert({theme:"black",title:"Error!",escapeKey:"Ok",content:e,onContentReady:function(){$(".jconfirm-box").css("background-color","#e74c3c")},buttons:{Ok:function(){n.children().toggleClass("ActionRow",300)}}})})},$.fn.RemoveUserRole=function(e,t,o){var n=$(e).closest("tr");n.children().toggleClass("ActionRow",300),apex.server.process("RemoveUserRole",{x01:t,x02:o},{dataType:"text"}).done(function(e){""===e?n.children().wrapInner("<div>").children().fadeOut(400,function(){n.remove()}):$.alert({theme:"black",title:"Error!",escapeKey:"Ok",content:e,onContentReady:function(){$(".jconfirm-box").css("background-color","#e74c3c")},buttons:{Ok:function(){n.children().toggleClass("ActionRow",300)}}})})},$.fn.CopyApplicationRole=function(e,t){var o=$(e).closest("tr");o.children().toggleClass("ActionRow",300),apex.server.process("CopyApplicationRole",{x01:t},{dataType:"text"}).done(function(e){""===e?($.dialog({theme:"black",escapeKey:!0,title:"Copy Role",content:"Role has been copied successfully.",onClose:function(){apex.event.trigger(document,"RefreshRoles")}}),setTimeout(function(){$(".jconfirm-box").css("background-color","rgb(77, 101, 38)")},100)):$.alert({theme:"black",title:"Error!",escapeKey:"Ok",content:e,onContentReady:function(){$(".jconfirm-box").css("background-color","#e74c3c")},buttons:{Ok:function(){o.children().toggleClass("ActionRow",300)}}})})};